<html>
    <body>
        <h1>Test events</h1>
        <div width="300px" style="background: #5b8894;">
            <button id="btnAddLesson" onclick="addElementToStage(stage, 'Lesson')">Add Lesson</button>
            <button id="btnAddQuiz" onclick="addElementToStage(stage, 'Quiz')">Add Quiz</button>
            <button id="btnAddQuiz" onclick="addElementToStage(stage, 'Achivement')">Add Achivement</button>
            
        </div>
        <div style="width:800px; height: 600px; background: #ffe600; overflow: scroll;">
            <div>
                <canvas id="stage" width="2000" height="2000" style="border: 1px; background: #f3fff2;"></canvas>
            </div>
        </div>
        <div><p id="jsonString">JSON goes here</p></div>

        <script src="./js/element.js"></script>
        <script src="./js/start-element.js"></script>
        <script src="./js/lesson-element.js"></script>
        <script src="./js/quiz-element.js"></script>
        <script src="./js/achivement-element.js"></script>
        <script src="./js/port.js"></script>
        <script src="./js/connector.js"></script>
        <script src="./js/stage.js"></script>

        <script>
            function addElementToStage(stage, type){
                stage.mode = "ADD_ELEMENT";
                stage.el_type = type;
                stage.setCursor("move");
            }

            function myEventHandlerMouseDown(e){
                stage.stageMouseDown(e);
            }

            function myEventHandlerMouseUp(e){
                stage.setCursor("default");
                stage.stageMouseUp(e);
            }

            function myEventHandlerMouseMove(e){
                stage.stageMouseMove(e);
            }

       
            const stage_canvas = document.getElementById("stage")
            const stage = new Stage(stage_canvas);

            let start_el = new StartElement("Start", 50,50);
            stage.addElement(start_el);
            stage.drawAll();
            
            // TODO toolbar
            const btnAddElement = document.getElementById("btnAddElement");

            let is_draw = false;
            let mode = "IDLE";
            let start_x = 0; 
            let start_y = 0;     
            let finish_x = 0; 
            let finish_y = 0;

            stage_canvas.addEventListener("mousedown", myEventHandlerMouseDown);
            stage_canvas.addEventListener("mouseup", myEventHandlerMouseUp);
            stage_canvas.addEventListener("mousemove", myEventHandlerMouseMove);

            

        </script>
    </body>
</html>